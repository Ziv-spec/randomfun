#include <stdlib.h>
#include <stdio.h>

static unsigned short program[] = {
	//
	// Instructions
	//
	0x7000, // format 
	0x7CF0, // colorline
	0x3822, // rectangle
	0x7C70, // colorline
	0x9002, 0x0024, // vector
	0x9002, 0x0026, // vector
	0x9002, 0x0028, // vector
	0x9002, 0x002A, // vector
	0x9002, 0x002C, // vector
	0x9002, 0x002E, // vector
	0x9002, 0x0030, // vector
	0x9002, 0x0032, // vector
	0x7CD0, // colorline
	0x9808, 0x0033, // circle
	0x7CE0, // colorline
	0x9808, 0x0033, // circle
	0x7CC0, // colorline  
	0x8904, 0x0033, // alpha
	0x7CA0, // colorline
	0x8914, 0x0035, // alpha
	0x7C90, // colorline
	0x8914, 0x003F, // alpha
	0x0803, // halt/end
	//
	// Data
	// 
	0x0000, 
	0x0000, 
	0x0C80, 
	0x0C80, 
	0x7CA5, 
	0x0640, 
	0xFCA5, 
	0x79C1, 
	0x035C, 
	0x0640, 
	0x835C, 
	0x79C1, 
	0x79C1, 
	0x035C, 
	0x8640, 
	0x035C, 
	0x79C1, 
	0x0000, 
	0xFE53, 
	0x0000,
	0x01AE, 
	0x0000,
	0x8640, 
	0x0000,
	0x79C1, 
	0x7CA5,
	0x8640,
	0x7CA5,
	0x0000,
	0x0640,
	0x8000,
	0x01AE,
	0x0000,
	0x7E53,
	0x8000,
	0x79C1,
	0x0000,
	0x0000,
	0x0640,
	0x0000,
	0x0000,
	0x0350,
	0x1F70,
	0x0000,
	0x0000,
	0x1405,
	0x1314,
	0x1D78,
	0x06A4,
	0x0000,
	0x5354,
	0x4943,
	0x4B00,
	0x464F,
	0x5243,
	0x4500,
	0x2D00,
	0x7271,
	0x2E74,
	0x7000,
	0x1D78,
	0x195C,
	0x0000,
	0x4655,
	0x454C,
	0x0051,
	0x5459,
	0x002D,
	0x0076,
	0x7070,
	0x7000,
	0x4C42,
	0x5300
};

static unsigned short blue_patch[] = {
	// Instructions
	0x7000, 
	0x7c90,
	0x9026, 0x0009,
	0x902c, 0x0053, 
	0x902e, 0x00a9,
	0x902c, 0x0103,
	0x0803,
	// Data 
	0x7eab, 0x150,
	0x8155, 0x150,
	0x0155, 0x148,
	0xfeab, 0x148,
	0x7eab, 0x140,
	0x8155, 0x140,
	0x0155, 0x138,
	0xfeab, 0x138,
	0x7eab, 0x130,
	0x8155, 0x130,
	0x0155, 0x128,
	0xfeab, 0x128,
	0x7eab, 0x120,
	0x8155, 0x120,
	0x0155, 0x118,
	0xfeab, 0x118,
	0x7eab, 0x110,
	0x8155, 0x110,
	0x0155, 0x108,
	0xfeab, 0x108,
	0x7eab, 0x100,
	0x8155, 0x100,
	0x0155, 0xf8,
	0xfeab, 0xf8,
	0x7eab, 0xf0,
	0x8155, 0xf0,
	0x0155, 0xe8,
	0xfeab, 0xe8,
	0x7eab, 0xe0,
	0x8155, 0xe0,
	0x0155, 0xd8,
	0xfeab, 0xd8,
	0x7eab, 0xd0,
	0x8155, 0xd0,
	0x0155, 0xc8,
	0xfeab, 0xc8,
	0x7eab, 0xc0,
	0x8155, 0xc0,
	0x0155, 0xb8,
	0xfeab, 0xb8,
	0x7eab, 0xb0,
	0x8155, 0xb0,
	0x0155, 0xa8,
	0xfeab, 0xa8,
	0x7eab, 0xa0,
	0x8155, 0xa0,
	0x0155, 0x98,
	0xfeab, 0x98,
	0x7eab, 0x90,
	0x8155, 0x90,
	0x0155, 0x88,
	0xfeab, 0x88,
	0x7eab, 0x80,
	0x8155, 0x80,
	0x0155, 0x78,
	0xfeab, 0x78,
	0x7eab, 0x70,
	0x8155, 0x70,
	0x0155, 0x68,
	0xfeab, 0x68,
	0x7eab, 0x60,
	0x8155, 0x60,
	0x0155, 0x58,
	0xfeab, 0x58,
	0x7eab, 0x50,
	0x8155, 0x50,
	0x0155, 0x48,
	0xfeab, 0x48,
	0x7eab, 0x40,
	0x8155, 0x40,
	0x0155, 0x38,
	0xfeab, 0x38,
	0x7eab, 0x30,
	0x8155, 0x30,
	0x0155, 0x28,
	0xfeab, 0x28,
	0x7eab, 0x20,
	0x8155, 0x20,
	0x0155, 0x18,
	0xfeab, 0x18,
	0x7eab, 0x10,
	0x8155, 0x10,
	0x0155, 0x8,
	0xfeab, 0x8,
	0x7eab, 0x0,
	0x8155, 0x0,
	0x0155, 0x7ff8,
	0xfeab, 0x7ff8,
	0x7eab, 0x7ff0,
	0x8155, 0x7ff0,
	0x0155, 0x7fe8,
	0xfeab, 0x7fe8,
	0x7eab, 0x7fe0,
	0x8155, 0x7fe0,
	0x0155, 0x7fd8,
	0xfeab, 0x7fd8,
	0x7eab, 0x7fd0,
	0x8155, 0x7fd0,
	0x0155, 0x7fc8,
	0xfeab, 0x7fc8,
	0x7eab, 0x7fc0,
	0x8155, 0x7fc0,
	0x0155, 0x7fb8,
	0xfeab, 0x7fb8,
	0x7eab, 0x7fb0,
	0x8155, 0x7fb0,
	0x0155, 0x7fa8,
	0xfeab, 0x7fa8,
	0x7eab, 0x7fa0,
	0x8155, 0x7fa0,
	0x0155, 0x7f98,
	0xfeab, 0x7f98,
	0x7eab, 0x7f90,
	0x8155, 0x7f90,
	0x0155, 0x7f88,
	0xfeab, 0x7f88,
	0x7eab, 0x7f80,
	0x8155, 0x7f80,
	0x0155, 0x7f78,
	0xfeab, 0x7f78,
	0x7eab, 0x7f70,
	0x8155, 0x7f70,
	0x0155, 0x7f68,
	0xfeab, 0x7f68,
	0x7eab, 0x7f60,
	0x8155, 0x7f60,
	0x0155, 0x7f58,
	0xfeab, 0x7f58,
	0x7eab, 0x7f50,
	0x8155, 0x7f50,
	0x0155, 0x7f48,
	0xfeab, 0x7f48,
	0x7eab, 0x7f40,
	0x8155, 0x7f40,
	0x0155, 0x7f38,
	0xfeab, 0x7f38,
	0x7eab, 0x7f30,
	0x8155, 0x7f30,
	0x0155, 0x7f28,
	0xfeab, 0x7f28,
	0x7eab, 0x7f20,
	0x8155, 0x7f20,
	0x0155, 0x7f18,
	0xfeab, 0x7f18,
	0x7eab, 0x7f10,
	0x8155, 0x7f10,
	0x0155, 0x7f08,
	0xfeab, 0x7f08,
	0x7eab, 0x7f00,
	0x8155, 0x7f00,
	0x0155, 0x7ef8,
	0xfeab, 0x7ef8,
	0x7eab, 0x7ef0,
	0x8155, 0x7ef0,
	0x0155, 0x7ee8,
	0xfeab, 0x7ee8,
	0x7eab, 0x7ee0,
	0x8155, 0x7ee0,
	0x0155, 0x7ed8,
	0xfeab, 0x7ed8,
	0x7eab, 0x7ed0,
	0x8155, 0x7ed0,
	0x0155, 0x7ec8,
	0xfeab, 0x7ec8,
	0x7eab, 0x7ec0,
	0x8155, 0x7ec0,
	0x0155, 0x7eb8,
	0xfeab, 0x7eb8,
	0x7eab, 0x7eb0,
	0x8155, 0x7eb0,
	0x0155, 0x7ea8,
	0xfeab, 0x7ea8,
};


static unsigned short centering[] = {
	0x7000,
	0x9008,
	0x000F,
	0x9002,
	0x001d, 
	0x9002,
	0x001f, 
	0x9002,
	0x0021, 
	0x9002,
	0x0023,
	0x9002,
	0x0025,
	0x9002,
	0x0027,
	0x0803,

	0x1800, 0x0540,
	0x87ff, 0x0540,
	0x0590, 0x07ff,
	0x8590, 0x1800,
	0x07ff, 0x1a6f,
	0x9800, 0x1a6f,
	0x1ac0, 0x1800,
	0x9ac0, 0x07ff,

	0x7800, 0x019a,
	0x9800, 0x1e67,
	0x7e67, 0x1800, 
	0x819a, 0x1800,
	0x07ff, 0x1e67,
	0x87ff, 0x019a, 
	0x019a, 0x07ff,
	0x9e67, 0x07ff,
	0x1E67, 0x0000,

	0x819a, 0x0000,
	0x0000, 0x019a, 
	0x8000, 0x1e67, 
	0x0300, 0x0300, 
	0x9cff, 0x1cff
};


static unsigned short test[] = {
	0x7000,
	0x9002,
	0x03a1,
	0x9005,
	0x0393,
	0x9003,
	0x0389,
	0x9004,
	0x037d,
	0x9006,
	0x036d,
	0x9004,
	0x0361,
	0x9007,
	0x034f,
	0x9003,
	0x0345,
	0x9003,
	0x033b,
	0x904a,
	0x02a3,
	0x9002,
	0x029b,
	0x9002,
	0x0293,
	0x9001,
	0x028d,
	0x9002,
	0x0285,
	0x9001,
	0x027f,
	0x9003,
	0x0275,
	0x9008,
	0x0261,
	0x9004,
	0x0255,
	0x9003,
	0x024b,
	0x9005,
	0x023d,
	0x9005,
	0x022f,
	0x9005,
	0x0221,
	0x9004,
	0x0215,
	0x9006,
	0x0205,
	0x9004,
	0x01f9,
	0x9004,
	0x01ed,
	0x9006,
	0x01dd,
	0x9003,
	0x01d3,
	0x9006,
	0x01c3,
	0x9002,
	0x01bb,
	0x9003,
	0x01b1,
	0x9005,
	0x01a3,
	0x9003,
	0x0199,
	0x9002,
	0x0191,
	0x9003,
	0x0187,
	0x9003,
	0x017d,
	0x9005,
	0x016f,
	0x9004,
	0x0163,
	0x9001,
	0x015d,
	0x9002,
	0x0155,
	0x9005,
	0x0147,
	0x9002,
	0x013f,
	0x9003,
	0x0135,
	0x9001,
	0x012f,
	0x9004,
	0x0123,
	0x9006,
	0x0113,
	0x9006,
	0x0103,
	0x9003,
	0x00f9,
	0x9001,
	0x00f3,
	0x9003,
	0x00e9,
	0x9003,
	0x00df,
	0x9001,
	0x00d9,
	0x9003,
	0x00cf,
	0x9004,
	0x00c3,
	0x9004,
	0x00b7,
	0x9005,
	0x00a9,
	0x9005,
	0x009b,
	0x9006,
	0x008b,
	0x9006,
	0x007b,
	0x9006,
	0x006b,
	0x9007,
	0x0059,
	0x9005,
	0x004b,
	0x9006,
	0x003b,
	0x9003,
	0x0031,
	0x9006,
	0x0021,
	0x9006,
	0x0011,
	0x9005,
	0x0003,
	0x0803,
	0x02eb,
	0x1a7a,
	0x8323,
	0x1a57,
	0x030a,
	0x19ff,
	0x82fa,
	0x1a61,
	0x02cc,
	0x1a23,
	0x82bd,
	0x1a2e,
	0x02bd,
	0x1a99,
	0x82d1,
	0x1a85,
	0x02d7,
	0x1a6b,
	0x82ae,
	0x1a47,
	0x02a3,
	0x1a57,
	0x82bd,
	0x1a6b,
	0x02b3,
	0x1a85,
	0x0280,
	0x1ad7,
	0x82a8,
	0x1a85,
	0x0285,
	0x1a61,
	0x824c,
	0x1a5c,
	0x024c,
	0x1a75,
	0x828f,
	0x1a85,
	0x0266,
	0x1aae,
	0x0099,
	0x1b7f,
	0x8119,
	0x1acc,
	0x0238,
	0x1a99,
	0x8219,
	0x1afa,
	0x01f5,
	0x1ad1,
	0x8200,
	0x1ac7,
	0x01eb,
	0x1aa3,
	0x81d7,
	0x1a9e,
	0x01d1,
	0x1aa8,
	0x81e1,
	0x1ab3,
	0x01e1,
	0x1ac7,
	0x01fa,
	0x1af0,
	0x823d,
	0x1acc,
	0x0214,
	0x1a8a,
	0x8200,
	0x1a94,
	0x0223,
	0x1ac2,
	0x81f5,
	0x1ae1,
	0x019e,
	0x1b1e,
	0x81c7,
	0x1adc,
	0x01dc,
	0x1aff,
	0x81eb,
	0x1af0,
	0x01cc,
	0x1a9e,
	0x81a8,
	0x1ae6,
	0x018a,
	0x1ab8,
	0x8175,
	0x1acc,
	0x016b,
	0x1b3d,
	0x8185,
	0x1b0a,
	0x0170,
	0x1ad1,
	0x8161,
	0x1acc,
	0x0157,
	0x1ad7,
	0x816b,
	0x1aff,
	0x0161,
	0x1b23,
	0x013d,
	0x1b51,
	0x8151,
	0x1b23,
	0x0142,
	0x1af5,
	0x812e,
	0x1ae6,
	0x0123,
	0x1af0,
	0x8138,
	0x1b19,
	0x012e,
	0x1b4c,
	0x010a,
	0x1b6b,
	0x8119,
	0x1b5c,
	0x011e,
	0x1b38,
	0x80fa,
	0x1b19,
	0x00f0,
	0x1b23,
	0x8105,
	0x1b3d,
	0x00fa,
	0x1b61,
	0x00b3,
	0x1b8a,
	0x80eb,
	0x1b66,
	0x00cc,
	0x1b14,
	0x80bd,
	0x1b1e,
	0x00d1,
	0x1b61,
	0x80ae,
	0x1b7a,
	0x005c,
	0x1bae,
	0x800f,
	0x1b99,
	0x1fc6,
	0x1b5c,
	0x8005,
	0x1b8a,
	0x000f,
	0x1b6b,
	0x800f,
	0x1b8a,
	0x18ff,
	0x1c2e,
	0x99f4,
	0x19dc,
	0x1bc1,
	0x1aa8,
	0x9b3c,
	0x1c23,
	0x1b56,
	0x1b94,
	0x1909,
	0x1c1e,
	0x9a74,
	0x1c14,
	0x1b98,
	0x1b6b,
	0x9bb2,
	0x1ab8,
	0x19ff,
	0x19e6,
	0x1cc6,
	0x1c66,
	0x9c56,
	0x1b42,
	0x1c84,
	0x1ad7,
	0x9c60,
	0x1b47,
	0x00d1,
	0x1ca3,
	0x9d5b,
	0x1b05,
	0x0223,
	0x1d4c,
	0x8223,
	0x1d38,
	0x028f,
	0x1d38,
	0x827a,
	0x1d47,
	0x1d0e,
	0x1d4c,
	0x9c09,
	0x1cf5,
	0x1b8e,
	0x1d1e,
	0x9c0e,
	0x1ce6,
	0x0633,
	0x1d8a,
	0x85dc,
	0x1ac7,
	0x1cff,
	0x1d7f,
	0x9cb2,
	0x1d99,
	0x1bd6,
	0x1d23,
	0x9cb2,
	0x1d8a,
	0x1aa7,
	0x1da8,
	0x9a98,
	0x1d8f,
	0x1aad,
	0x1d8f,
	0x9aa2,
	0x1d75,
	0x1aad,
	0x1d5c,
	0x9ab7,
	0x1d6b,
	0x1ab7,
	0x1d99,
	0x18ea,
	0x1dd7,
	0x98ef,
	0x1d8a,
	0x18e5,
	0x1d75,
	0x98cb,
	0x1d75,
	0x18db,
	0x1d6b,
	0x98d0,
	0x1d61,
	0x18f9,
	0x1d8f,
	0x18ea,
	0x1e28,
	0x98cb,
	0x1e1e,
	0x189d,
	0x1dae,
	0x98d0,
	0x1e0f,
	0x18ea,
	0x1e05,
	0x021e,
	0x1e28,
	0x8138,
	0x1db3,
	0x039e,
	0x1e28,
	0x8257,
	0x1d61,
	0x035c,
	0x1d33,
	0x8299,
	0x1d70,
	0x1bb2,
	0x1e75,
	0x9b37,
	0x1d70,
	0x1ba7,
	0x1e23,
	0x058a,
	0x1e8a,
	0x8599,
	0x1e5c,
	0x0594,
	0x1e3d,
	0x85a8,
	0x1e28,
	0x059e,
	0x1e38,
	0x85a8,
	0x1e6b,
	0x01a3,
	0x1e8a,
	0x810a,
	0x1e4c,
	0x0147,
	0x1e57,
	0x1eb7,
	0x1e8f,
	0x9ec1,
	0x1df5,
	0x010a,
	0x1e42,
	0x806b,
	0x1e38,
	0x00e6,
	0x1e75,
	0x80c7,
	0x1e99,
	0x0047,
	0x1e2e,
	0x0475,
	0x1e9e,
	0x83a3,
	0x1bf5,
	0x015c,
	0x1c42,
	0x8380,
	0x1d3d,
	0x014c,
	0x1c28,
	0x8394,
	0x1bcc,
	0x01a8,
	0x1ce1,
	0x81d1,
	0x1cf5,
	0x0200,
	0x1cd7,
	0x81b3,
	0x1cd1,
	0x053d,
	0x1eb3,
	0x84e6,
	0x1eb8,
	0x0505,
	0x1ed1,
	0x8438,
	0x1eae,
	0x0333,
	0x1ee6,
	0x823d,
	0x1e47,
	0x0294,
	0x1e4c,
	0x1dc1,
	0x1b7a,
	0x828a,
	0x1ed7,
	0x1edb,
	0x1c94,
	0x9e98,
	0x1f33,
	0x1ee0,
	0x1f75,
	0x9fa2,
	0x1df0,
	0x00b8,
	0x1dbd,
	0x9fa2,
	0x1e05,
	0x1f50,
	0x1e7f,
	0x9fea,
	0x1e38,
	0x1f22,
	0x1ee1,
	0x9f46,
	0x1eb8,
	0x1f4b,
	0x1e7a,
	0x9f1d,
	0x1ec7,
	0x1f5b,
	0x1f70,
	0x9fd0,
	0x1f0a,
	0x008f,
	0x1f57,
	0x1fc1,
	0x1f3d,
	0x9fe0,
	0x1f47,
	0x0000,
	0x1f33,
	0x9ff9,
	0x1f28,
	0x0014,
	0x1f28,
	0x9fe0,
	0x1f0f,
	0x1fef,
	0x1f28,
	0x0280,
	0x1fae,
	0x8280,
	0x1f6b,
	0x0294,
	0x1f42,
	0x828a,
	0x1fae,
	0x1d79,
	0x1fa8,
	0x9c89,
	0x1f33,
	0x1d79,
	0x1f70,
	0x9d18,
	0x1e6b,
	0x1c89,
	0x1f19,
	0x9c6a,
	0x1ea3,
	0x1d89,
	0x1eae,
	0x1cef,
	0x1fa3,
	0x9cf4,
	0x1f99,
	0x1cea,
	0x1f7a,
	0x9cd6,
	0x1f61,
	0x1ccb,
	0x1f75,
	0x1f89,
	0x0006,
	0x8085,
	0x0086,
	0x013d,
	0x1fd1,
	0x804c,
	0x00e7,
	0x0080,
	0x0080,
	0x1edb,
	0x002f,
	0x9fe0,
	0x1f8f,
	0x010a,
	0x1fd1,
	0x9ef9,
	0x1ff0,
	0x1f3c,
	0x0080,
	0x9f98,
	0x0034,
	0x1f56,
	0x0110,
	0x0099,
	0x0176,
	0x80b3,
	0x0152,
	0x0123,
	0x0139,
	0x8161,
	0x0152,
	0x012e,
	0x0143,
	0x004c,
	0x01a9,
	0x8061,
	0x0176,
	0x0066,
	0x01a9,
	0x80d7,
	0x01c3,
	0x01b8,
	0x017b,
	0x80f0,
	0x01e2,
	0x00d1,
	0x01cd,
	0x80a3,
	0x01b4,
	0x00a3,
	0x01a4,
	0x8080,
	0x01af,
	0x0085,
	0x01be,
	0x80bd,
	0x01d8,
	0x1f89,
	0x01c8,
	0x9f18,
	0x01ec,
	0x1e98,
	0x019f,
	0x9f13,
	0x0152,
	0x1f7f,
	0x0186,
	0x9eb2,
	0x019f,
	0x1f8e,
	0x0200,
	0x9fa2,
	0x01a9,
	0x1f89,
	0x0158,
	0x9fb2,
	0x01fb,
	0x0051,
	0x0243,
	0x8185,
	0x01c3,
	0x0100,
	0x0252,
	0x81a3,
	0x021a,
	0x0119,
	0x026c,
	0x1ea7,
	0x0267,
	0x9eea,
	0x0234,
	0x1ead,
	0x0239,
	0x9ea7,
	0x0200,
	0x1ecb,
	0x022f,
	0x9f41,
	0x0215,
	0x1f41,
	0x0252,
	0x9f84,
	0x01fb,
	0x1f32,
	0x026c,
	0x022e,
	0x0295,
	0x8257,
	0x0239,
	0x023d,
	0x0224,
	0x82a3,
	0x01af,
	0x0142,
	0x02d2,
	0x9fb2,
	0x02e7,
	0x1f1d,
	0x0306,
	0x9fc1,
	0x030b,
	0x1f65,
	0x031a,
	0x004c,
	0x0358,
	0x80eb,
	0x0339,
	0x1fa7,
	0x0362,
	0x8000,
	0x0348,
	0x0033,
	0x034d,
	0x0251,
	0x0367,
	0x82b8,
	0x0239,
	0x02c7,
	0x02e2,
	0xf800,
	0x1e8a,
	0x9827,
	0x1e19,
	0x187f,
	0x1e1e,
	0x9865,
	0x1dd1,
	0x18db,
	0x1e61,
	0x995b,
	0x1ddc,
	0x1abc,
	0x1e33,
	0x9aa7,
	0x1df5,
	0x1b9d,
	0x1ec7,
	0x9bb2,
	0x1e8f,
	0x1c09,
	0x1f5c,
	0x9da2,
	0x00b9,
	0x1d93,
	0x1ff0,
	0x9cff,
	0x000b,
	0x1c2d,
	0x1f14,
	0x9c84,
	0x1e2e,
	0x1d5b,
	0x1e38,
	0x9d2d,
	0x1dc7,
	0x1df4,
	0x1f2e,
	0x9d84,
	0x1fd1,
	0x1db7,
	0x00a9,
	0x9e27,
	0x00f6,
	0x1ee5,
	0x1e7f,
	0x9f79,
	0x1ddc,
	0x1e7f,
	0x1ff5,
	0x9e74,
	0x02cd,
	0x1f9d,
	0x0471,
	0x80b8,
	0x0434,
	0x0014,
	0x0476,
	0x80d1,
	0x04be,
	0x008f,
	0x048b,
	0x80f0,
	0x0452,
	0x008a,
	0x0467,
	0x8100,
	0x0439,
	0x00d1,
	0x049a,
	0x8151,
	0x04a9,
	0x02b3,
	0x038b,
	0x813d,
	0x048b,
	0x01fa,
	0x037b,
	0x81dc,
	0x0415,
	0x02d7,
	0x0300,
	0x8319,
	0x0176,
	0x02c7,
	0x0080,
	0x828a,
	0x0095,
	0x02ae,
	0x1f42,
	0x82cc,
	0x0067,
	0x0380,
	0x1f9e,
	0x83bd,
	0x1e7f,
	0x043d,
	0x1f1e,
	0x850a,
	0x1f47,
	0x05bd,
	0x1eb3,
	0x8623,
	0x1d94,
	0x061e,
	0x1e19,
	0x8700,
	0x1b8a,
	0x06cc,
	0x1b4c,
	0x8728,
	0x1b14,
	0x070f,
	0x18c2,
	0x873d,
	0x1b14,
	0x0675,
	0x1dc2,
	0x8561,
	0x1f33,
	0x0447,
	0x1f23,
	0x8366,
	0x1fae,
	0x02d1,
	0x008b,
	0x8328,
	0x01b9,
	0x02bd,
	0x03a4,
	0x81a3,
	0x04c8,
	0x0057,
	0x04f1,
	0x9ef4,
	0x0434,
	0x1e6a,
	0x032f,
	0x9e56,
	0x0129,
	0x1d22,
	0x008b,
	0x9b0e,
	0x1e4c,
	0x1956,
	0x1e19,
	0x98cb,
	0x1e75,
	0x1889,
	0x1e28,
	0x0561,
	0x1f14,
	0x85a8,
	0x1ed1,
	0x058f,
	0x1ed1,
	0x856b,
	0x1ef5,
	0x038f,
	0x1f85,
	0x8423,
	0x1f1e,
	0x03f5,
	0x1e99,
	0x839e,
	0x1ef5,
	0x1d84,
	0x1fc7,
	0x9dd0,
	0x1f57,
	0x1d9d,
	0x1e9e,
	0x9cf9,
	0x1e33,
	0x1c93,
	0x1e47,
	0x9c41,
	0x1ecc,
	0x1c60,
	0x1f61,
	0x9cd6,
	0x1fc7,
	0x1eb2,
	0x035d,
	0x9e79,
	0x02d2,
	0x1e79,
	0x031a,
	0x9e98,
	0x0334,
	0x1e7f,
	0x0339,
	0x1f37,
	0x0439,
	0x9ee0,
	0x03dd,
	0x1eef,
	0x03c8,
	0x9ec1,
	0x03c3,
	0x1ed6,
	0x039a,
	0x9ead,
	0x0390,
	0x1eb2,
	0x03d2,
	0x01e6,
	0x0462,
	0x8233,
	0x0443,
	0x0299,
	0x03b9,
	0x8228,
	0x0434,
	0x01dc,
	0x0448,
	0x01a3,
	0x0490,
	0x81cc,
	0x0490,
	0x01eb,
	0x046c,
	0x81dc,
	0x0462,
	0x0157,
	0x04b4,
	0x818a,
	0x04be,
	0x01ae,
	0x049a,
	0x817a,
	0x049a,
	0x0175,
	0x04b4,
	0x8161,
	0x04a9,
	0x00b8,
	0x04c8,
	0x9fc1,
	0x04a9,
	0x002e,
	0x04d8,
};


static void 
st_rect(short *code) {

	// offset to data
	short offset = *code & 0x7ff; 
	code = code + offset; 

	short xcenter = *code; 
	code = code + 1;
	short ycenter = *code; 
	code = code + 1;
	short xlen = *code;
	code = code + 1;
	short ylen = *code;

	printf("rectangle %d %d %d %d\n", xcenter, ycenter, xlen, ylen);
}

static char *colors[16] = {
	[0] = "color-off",
	[1] = "DIM BLUE",
	[2] = "DIM GREEN",
	[3] = "DIM CYAN",
	[4] = "DIM RED",
	[5] = "DIM MAGENTA",
	[6] = "DIM AMBER",
	[7] = "DIM WHITE",
	[8] = "ORANGE",
	[9] = "BLUE",
	[10] = "GREEN",
	[11] = "CYAN",
	[12] = "RED",
	[13] = "MAGENTA",
	[14] = "AMBER",
	[15] = "WHITE",
};

static void 
st_linecolor(short *code, int format) {

	short offset = *code & 0x03ff;
	code = code + offset;

	if (*code == 0x0) return;

	// mpcd
	short rgb = 0;
	if (format == 1) {
		if ((*code & 0x400) == 0) { 
			rgb = (*code >> 12) & 0xf;
		}
	}
	else { 
		if ((*code & 0x004) == 0) {
			rgb = (*code >> 4) & 0xf; 
		}
	}

	printf("colorline: %s\n", colors[rgb]);
}

static int
st_defl(int cord) { 
	int value = cord & 0x7ff;
	return ((cord & 0x1800) == 0) ? value : -(0x7ff - value);
}

static void 
st_vector(short *code) { 
	//printf("vector: ");

	short xy_data_words = (*code & 0x01ff) + 1;
	//printf("data words: %d\n", xy_data_words);
	code = code + 1;

	code = code + (*code & 0x07ff) -1; // data offset

	for (int i = 0; i < xy_data_words; i++) {
		short xvec = *code; code = code + 1;
		short yvec = *code; code = code + 1;
		
		// printf("\t(%hx, %hx) (%d %d)\n", xvec, yvec, st_defl(xvec), st_defl(yvec)  );
		printf("[%d, %d],\n", st_defl(xvec), st_defl(yvec));
	}
	printf("\n");
}

int main() { 

	if (test[0] != 0x7000) {
		printf("not format\n");
		return -1;
	}

	unsigned short *opcode = test + 1;
	unsigned short code = *opcode & 0xf800;


	while (code != 0x0800) {

		switch (code) {
			case 0x0000: { // NOP
				opcode = opcode + 1;
			} break;

			case 0x0800: { //terminator
				printf("halt\n");
		  } return 0;

			case 0x3800: {
				st_rect(opcode);
				opcode = opcode + 1;
		  } break;

			case 0x7000: {
				printf("second format is illegal\n");
			} return -1;

			case 0x7800: {
				int format = ((*opcode & 0x0400) == 0) ? 1 : 2;

				st_linecolor(opcode, format);

				if (format == 1) {
					opcode = opcode + 2;
				}
				else { // format 2
					opcode = opcode + 1;
				}
		  }	break;

			case 0x8000: {
				printf("line structure\n");
				opcode = opcode + 2;
		  } break;

			case 0x8800: {
				printf("alpha\n");  // maybe alphanumeric to place (how we render text)
				opcode = opcode + 2;
		  } break;
			 
			case 0x9000: { 
			  st_vector(opcode);
			  opcode = opcode + 2;
		  } break;

			case 0x9800: { 
				printf("conic\n"); 
				opcode = opcode + 2;
	 	  } break;
			default: { printf("what is going on here?\n"); return 0; }
		}

		code = *opcode & 0xf800;
	}

	return 0;
}




